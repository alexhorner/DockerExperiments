version: '3.7'

services:
    mail:
        image: tvial/docker-mailserver:latest
        hostname: docker
        domainname: docker.cloudyhost.net
        ports:
            - "25:25"
            - "143:143"
            - "587:587"
            - "993:993"
        volumes:
            - maildata:/var/mail
            - mailstate:/var/mail-state
            - mailconfig:/tmp/docker-mailserver/
            - /etc/letsencrypt/live/cloudyhost.net:/etc/letsencrypt/:ro
            - /etc/localtime:/etc/localtime:ro
     
#    webmail:
#        image: krishath/rainloop-ssl
#        volumes:
#        - /etc/letsencrypt/live/cloudyhost.net/cert.pem:/etc/ssl/cert.pem:ro
#        - /etc/letsencrypt/live/cloudyhost.net/privkey.pem:/etc/ssl/cert.key:ro
#        - webmaildata:/webapps/rainloop/data
#        - /etc/localtime:/etc/localtime:ro
#        ports:
#        - "4430:443"

    webmail:
        image: roundcube/roundcubemail
        environment:
            - ROUNDCUBEMAIL_DEFAULT_HOST=mail
            - ROUNDCUBEMAIL_SMTP_SERVER=mail
        ports:
            - "800:80"
volumes:
    maildata:
    mailstate:
    mailconfig:
    webmaildata:
